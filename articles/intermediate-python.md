---
title: "Pythonä¸­ç´šè€…ã«ãªã‚‹ãŸã‚ã®Modern Python"
emoji: "ğŸ’­"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['python', 'modern']
published: false
---

# ã¯ã˜ã‚ã«

## æœ¬è¨˜äº‹ã®èª­è€…å¯¾è±¡

- Pythonã«æ…£ã‚Œã¦ãã¦ã€æ–°ã—ã„æ–‡æ³•ãƒ»é–‹ç™ºç’°å¢ƒã‚’è¦šãˆãŸã„æ–¹
- ã‚ˆã‚Šãƒ¢ãƒ€ãƒ³ã«è¿‘ã„Pythonç’°å¢ƒãŒæ¬²ã—ã„æ–¹

## æƒ³å®šã—ã¦ã„ãªã„æ–¹

- Pythonè‡ªä½“ãŒã¯ã˜ã‚ã¦ã®æ–¹
- Pythonä¸Šç´šè€…

## èª¬æ˜ã™ã‚‹ã“ã¨ãƒ»ã—ãªã„ã“ã¨

èª¬æ˜ã™ã‚‹

- ãƒ„ãƒ¼ãƒ«ã®ãŠãŠã¾ã‹ãªèª¬æ˜
- ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ç†ç”±ãƒ»å¬‰ã—ã•
- å‚è€ƒã«ãªã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»URL

èª¬æ˜ã—ãªã„

- å…·ä½“çš„ãªã‚³ãƒãƒ³ãƒ‰

# Modern Python

å¤§å­¦é™¢ã§ç ”ç©¶ã‚’ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã‹ã‚‰ã€é•·ã„æ™‚é–“Pythonã‚’æ›¸ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
ãªãœãªã‚‰ã°ã€ç ”ç©¶ã§åˆ©ç”¨ã—ã‚„ã™ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè±Šå¯Œã€ã‹ã¤ç ”ç©¶ã®ã‚ˆã†ãªã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒã¯ã‚„ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾ã—ã¦éå¸¸ã«æœ‰åŠ¹ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚

ã—ã‹ã—ã€Pythonã¯çŸ­æœŸçš„ã«ã‚³ãƒ¼ãƒ‰ã‚’è©¦ã—ã¦å‹•ä½œã‚’å¤‰æ›´ã§ãã‚‹åˆ†ã€å®‰å®šã—ãŸå‹•ä½œãŒé›£ã—ããªã£ã¦ãã¾ã™ã€‚
ãŸã¨ãˆã°ã€C++ãªã©ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’é€šã™å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€è¨­è¨ˆã‚’ã†ã¾ãè€ƒãˆã¦å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€æ–¹ã€Pythonã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªãªã®ã§æœ€æ‚ª`é—‡ã®è¨­è¨ˆ`ã‚’ã™ã‚‹ã¨å®Ÿè£…è€ƒãˆãªãã¦ã‚‚ãªã‚“ã¨ã‹ãªã‚Šã¾ã™ã€‚
ãŸã ã€ã“ã®ã‚ˆã†ãªå¾Œå…ˆè€ƒãˆãªã„ã‚³ãƒ¼ãƒ‰ã¯å°†æ¥çš„ã«å¤§ããªè² å‚µã«ãªã‚Šã¾ã™ã€‚
å®Ÿéš›ã€ç· ã‚åˆ‡ã‚ŠãŒè¿‘ã„è«–æ–‡ã«åˆã‚ã›ã¦æ€¥ãƒ”ãƒƒãƒã§æ›¸ã„ãŸã‚³ãƒ¼ãƒ‰ãŒç¾åœ¨è‡ªåˆ†ã®å‰ã«ç«‹ã¡ã¯ã ã‹ã‚Šã€ã¾ãŸ1ã‹ã‚‰è¨­è¨ˆãƒ»å®Ÿè£…ã—ç›´ã™ç¾½ç›®ã«ãªã‚Šã¾ã—ãŸã€‚

Pythonã¯è‰¯ãã‚‚æ‚ªãã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚

- å‹ã‚’è¨­å®šã—ãªãã¦ã„ã„ï¼ˆãã®åˆ†ã€å¤‰æ•°åã«æ€ã„ã‚’é¦³ã›ã‚‹ï¼‰
- ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå¤šã„
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãšã‚Œã‚‹
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãŒè±Šå¯Œ
  - ã©ã‚Œã‚’ä½¿ãˆã°ã„ã„ã®ã‹ãŒåˆ†ã‹ã‚Šã¥ã‚‰ã„
- è¨­è¨ˆãŒç”˜ãã¦è‰¯ã„ï¼ˆèª­ã¿è¾›ããªã‚‹ï¼‰

ä»Šå›ã¯ã€ã“ã‚Œã‚‰ã®å•é¡Œã‚’è§£æ±ºã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ã¾ã¨ã‚ã¾ã™ã€‚
ãŸã ã—ã€å®Ÿéš›ã®ä½¿ã„æ–¹ã‚„è©³ç´°ã«ã¤ã„ã¦ã¯å‰²æ„›ã—ã¦ã„ã‚‹ãŸã‚ã€ä»–è¨˜äº‹ã‚’å‚è€ƒãã ã•ã„ã€‚

ã‚‚ã£ã¨è‡ªåˆ†ã‚‚ã¯ã‚„ãPythonã«æ…£ã‚Œã¦ä¸­ç´šè€…ã«ãªã£ã¦ã„ããŸã„ã§ã™ã€‚

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼

Pythonã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã¯å¤šãã®ç¨®é¡ã®çµ„ã¿åˆã‚ã›ãŒã‚ã‚Šã¾ã™ã€‚
ä»¥å‰[pythonã®ç’°å¢ƒæ§‹ç¯‰æˆ¦äº‰ã«ã‚¤ãƒ©ã‚¹ãƒˆã§çµ‚æ­¢ç¬¦ã‚’ã©ã†ã‚„ã‚‰æ‰“ã¦ãªã„](https://qiita.com/ganariya/items/1bf870275bad7b5ab506)ã¨ã„ã†è¨˜äº‹ã§Pythonã®ç’°å¢ƒã®æ§‹ç¯‰ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚
ãã“ã‹ã‚‰è‡ªåˆ†ã®ç†è§£ã‚‚ã‚ã‚‹ç¨‹åº¦é€²ã¿ã€ä»Šã®Pythonã®ç’°å¢ƒæ§‹ç¯‰ã“ã‚Œã§ã„ã„ã‹ãªã€œã¨æ„Ÿã˜ã‚‹ã‚‚ã®ãŒã‚ã£ãŸãŸã‚ã€ãã‚Œã«ã¤ã„ã¦ã¾ã¨ã‚ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

## ãƒ‘ã‚¿ãƒ¼ãƒ³1: pyenv + pipenv

`pyenv`ã¯**è¤‡æ•°ã®Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†**ã§ãã¾ã™ã€‚
ãŸã¨ãˆã°ã€Python3.7ã€Python3.8ã€Python3.9ã‚’ãã‚Œãã‚Œã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å¥½ãã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œã§ãã¾ã™ã€‚
æ˜”ã‹ã‚‰ç¶šã„ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã¯Python2.7ã§ã—ã‹å‹•ã‹ãªã„ã‚“ã ï¼ã¿ãŸã„ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€pyenvã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã¨ã†ã‚Œã—ã„ã‚ã‘ã§ã™ã€‚

ã—ã‹ã—ã€`pyenv`ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
ã“ã®ä»®æƒ³ç’°å¢ƒã¨ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«åˆ©ç”¨ã™ã‚‹ç’°å¢ƒã®ã“ã¨ã‚’æœ¬è¨˜äº‹ã§ã¯æŒ‡ã—ã¾ã™ã€‚

ã‚‚ã—ä»®æƒ³ç’°å¢ƒã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‰ã‚Œãªã„å ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚
æ©Ÿæ¢°å­¦ç¿’ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹ç™ºã‚’è¡Œã£ãŸå¾Œã€åˆ¥ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒDjangoã®é–‹ç™ºã«ãªã£ãŸã¨ã—ã¾ã™ã€‚
ã“ã®ã¨ãã€æ©Ÿæ¢°å­¦ç¿’ã®pytorchã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯Djangoã«ç›´æ¥å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
å¤§é‡ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¢—ãˆã¦ãã‚‹ã¨å‹•ä½œã‚‚é‡ããªã‚Šã€å¿…è¦ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®æ•´åˆæ€§ãŒå–ã‚Œãªããªã£ã¦ãã¾ã™ã€‚
ãã®ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ãªä»®æƒ³ç’°å¢ƒãŒå¿…è¦ãªã‚ã‘ã§ã™ã€‚

ãã—ã¦ã€`pipenv`ã¯ã€`ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Pythonã«ãŠã„ã¦ã€è¤‡æ•°ã®ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹`ã“ã¨ãŒã§ãã¾ã™ã€‚
venvã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ãªä¾¿åˆ©ãªæ©Ÿèƒ½ãŒpipenvã«ãŸãã•ã‚“å‚™ã‚ã£ã¦ã„ã‚‹ã®ã§ã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚
ã¾ãŸã€ã“ã“ã§ã¯è©³ã—ãã¯è¿°ã¹ã¾ã›ã‚“ãŒã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ­ãƒƒã‚¯ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ã¨ã‚ã‚‹ã¨ã€`pyenv`ã§Pythonè‡ªä½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã—ã€`pipenv`ã§ç‰¹å®šã®Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ãŠã‘ã‚‹ä»®æƒ³ç’°å¢ƒã‚’ç®¡ç†ã—ã¾ã™ã€‚
Macã§ã¯brewã§pipenv, pyenvä¸¡æ–¹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

## ãƒ‘ã‚¿ãƒ¼ãƒ³2: pyenv + poetry

pyenvã¯ã•ãã»ã©å‡ºã¦ãã¾ã—ãŸã€‚
ä»Šå›ã€æ–°ã—ãå‡ºã¦ããŸã®ã¯poetryã«ãªã‚Šã¾ã™ã€‚

poetryã¯rustã£ã½ããƒ©ã‚¤ãƒ–ãƒ©ãƒªç®¡ç†ãŒã§ãã‚‹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ã‚ˆã†ã§ã™ã€‚
ã¾ã è§¦ã£ãŸã“ã¨ãŒãªã„ãŸã‚è©³ã—ããªã„ã®ã§ã™ãŒã€tomlãƒ•ã‚¡ã‚¤ãƒ«1ã¤ã§ã™ã¹ã¦ã‚’ç®¡ç†ã™ã‚‹ã‚‰ã—ã„ã§ã™ã€‚

ã‹ãªã‚Šæ–°ã—ã„ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ã‚ˆã†ãªã®ã§ã€ä»Šåº¦è§¦ã£ã¦ã¿ãŸã„ã§ã™ã€‚

## å‚è€ƒURL

- [poetry](https://python-poetry.org/docs/)
- [pipenv](https://pipenv-ja.readthedocs.io/ja/translate-ja/basics.html)
- [Pythonã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å‘¨ã‚Šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’ç†è§£ã™ã‚‹](https://www.m3tech.blog/entry/python-packaging) 

# å‹ã®å°å…¥

Pythonã¯å‹ä»˜ã‘ã‚’ã—ãªãã¦ã‚‚å‹•ãã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã§ã™ã€‚
ãã®ãŸã‚ã€åˆæœŸæ®µéšã§ã¯ã‹ãªã‚Šã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã§é–‹ç™ºã§ãã¾ã™ãŒã€å¾ŒåŠã«ãªã£ã¦ãã‚‹ã¨å¤‰æ•°ã«æ€ã„ã‚’é¦³ã›ã‚‹æ™‚é–“ãŒé•·ããªã‚Šã€å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã«æ‚©ã¾ã•ã‚Œã‚‹ã“ã¨ãŒå¤šããªã‚Šã¾ã™ã€‚

ãã“ã§ã€Python3.5ã‹ã‚‰å°å…¥ã•ã‚ŒãŸ`typing`ãªã©ã‚’åˆ©ç”¨ã—ã¦å‹å®‰å…¨ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ãã¾ã™ã€‚
ã—ã‹ã—ã€**å®Ÿè¡Œæ™‚ã«å‹ãŒç•°ãªã£ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã•ãªã„**ã“ã¨ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
å®Ÿè¡Œæ™‚ã«æ­¢ã¾ã‚‹ã‚ã‘ã§ã¯ãªãã€IDEãªã©ã§ãŠã‹ã—ã„éƒ¨åˆ†ã‚’æŒ‡æ‘˜ã•ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚

## typing

```python
def greeting(name: str) -> str:
    return 'Hello ' + name
```

Python3.5ã‹ã‚‰ã€ä¸Šè¨˜ã®ã‚ˆã†ã«å¤‰æ•°ã‚„é–¢æ•°ãªã©ã«å‹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
å‹ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€IDEã®æ©æµã‚’å—ã‘ã‚„ã™ããªã‚Šã¾ã™ã€‚
ã¾ãŸã€é•·æœŸçš„ã«è¦‹ã‚‹ã¨ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®åŠ¹ç‡åŒ–ã«ç¹‹ãŒã‚Šã¾ã™ã€‚

`Final`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚‚ã‚ã‚Šã€å®šæ•°ãªã©ã‚’ã‚ˆã‚Šå®‰å…¨ã«è¨­å®šã§ãã¾ã™ã€‚

è©³ã—ãã¯å‚è€ƒURLã‚’å¾¡è¦§ãã ã•ã„ã€‚

## data classes

ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ã‚ˆã‚Šç°¡å˜ã«ä½œæˆã™ã‚‹ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãªã©ã‚’æä¾›ã—ã¾ã™ã€‚

```python
from dataclasses import dataclass

@dataclass
class InventoryItem:
    """Class for keeping track of an item in inventory."""
    name: str
    unit_price: float
    quantity_on_hand: int = 0

    def total_cost(self) -> float:
        return self.unit_price * self.quantity_on_hand
```

## namedtuple

åå‰ã‚’ã¤ã‘ãŸã‚¿ãƒ—ãƒ«ã‚’å®£è¨€ã§ãã¾ã™ã€‚
æ›¸ãæ›ãˆã‚‰ã‚Œãªã„ãƒ‡ãƒ¼ã‚¿ã‚’ä¿è¨¼ã§ãã‚‹ã®ã§ã€å¤‰æ›´ã—ãªã„ã‚‚ã®ã‚’ç®¡ç†ã™ã‚‹ã«ã¯ä¾¿åˆ©ãã†ã§ã™ã€‚

å¯èƒ½ã§ã‚ã‚Œã°`typing.NamedTuple`ã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ã§ã‚¿ãƒ—ãƒ«ã‚’å®£è¨€ã—ãŸã»ã†ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

```python
class Employee(NamedTuple):
    name: str
    id: int
```

## ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹

## pydantic

FastAPIã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
å®Ÿè¡Œæ™‚ã«å‹æƒ…å ±ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚

```python
from datetime import datetime
from typing import List, Optional
from pydantic import BaseModel


class User(BaseModel):
    id: int
    name = 'John Doe'
    signup_ts: Optional[datetime] = None
    friends: List[int] = []
    
external_data = {
    'id': '123',
    'signup_ts': '2019-06-01 12:22',
    'friends': [1, 2, '3'],
}
user = User(**external_data)
```

å‹ãŒã‚ã£ã¦ã„ãªã„ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‹ã¨**å®Ÿè¡Œæ™‚ã§ã‚‚**ä¾‹å¤–ã‚’æŠ•ã’ã¦ãã‚Œã¾ã™ã€‚
ï¼ˆä¸€æ–¹typingãªã©ã¯æŠ•ã’ã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã‚ˆã‚Šå‹ã§ãŠã‹ã—ã„ç®‡æ‰€ãŒã‚ã‹ã‚Šã‚„ã™ãã€å …ç‰¢æ€§ãŒä¸ŠãŒã‚Šã¾ã™ã€‚ï¼‰

## å‚è€ƒURL

- [typings](https://docs.python.org/ja/3/library/typing.html)
- [dataclasses](https://docs.python.org/ja/3.9/library/dataclasses.html)
- [namedtuple](https://docs.python.org/ja/3/library/collections.html#collections.namedtuple)
- [pydantic](https://pydantic-docs.helpmanual.io/)
- [Pythonã§ã¯ã˜ã¾ã‚‹ã€å‹ã®ã‚ã‚‹ä¸–ç•Œ](https://qiita.com/icoxfog417/items/c17eb042f4735b7924a3)
- [pydanticã‚’ä½¿ã£ã¦å®Ÿè¡Œæ™‚ã«ã‚‚å‹æƒ…å ±ãŒé©ç”¨ã•ã‚Œã‚‹Pythonã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã](https://qiita.com/koralle/items/93b094ddb6d3af917702)
- [Pythonã¨Type Hintsã§æ›¸ããƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰](https://engineering.mercari.com/blog/entry/20201105-0a4057b2ba/)
- [Python 3.9 æ™‚ä»£ã®å‹å®‰å…¨ãª Python ã®æ¥µã‚æ–¹](https://www.youtube.com/watch?v=jLQLFFznPIo)

# docstring

`docstring`ã¯ã€é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ãªã©ã®æƒ…å ±ã‚’è¡¨ã™æ–‡å­—åˆ—ã§ã™ã€‚

é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ãŒã©ã®ã‚ˆã†ãªå¼•æ•°ãƒ»å±æ€§ã‚’æŒã¤ã®ã‹ã€ã©ã®ã‚ˆã†ãªæŒ¯ã‚‹èˆã„ã‚’ã™ã‚‹ã®ã‹ã‚’æ–‡å­—åˆ—ã§è¨˜è¿°ã—ã¾ã™ã€‚

```python
def add(x:int, y:int) -> int:
    """add function.

    xã¨yã®å’Œã‚’è¨ˆç®—ã™ã‚‹ã€‚

    Attributes
    ----------
    x: int
        è¶³ã•ã‚Œã‚‹æ•°
    y: int
        è¶³ã™å¼•æ•°

    Returns
    -------
    int

    Notes
    -----
    ã“ã†ã„ã†é–¢æ•°ã«æ™®é€šã¯ã“ã“ã¾ã§æ›¸ãã“ã¨ã¯ãªã„ï¼ˆã‚ã‹ã‚‹ã®ã§ï¼‰

    """
    return x + y
```

## docstringã®ãƒ¡ãƒªãƒƒãƒˆ

docstringã‚’æ›¸ãã“ã¨ã§ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚

- ä»–ã®ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã®æŒ¯ã‚‹èˆã„ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ãã‚‹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚³ãƒ¼ãƒ‰ã®è·é›¢ãŒè¿‘ã„
- IDEãªã©ã«ãŠã„ã¦ã€å‹ã‚„è£œè¶³æƒ…å ±ãŒã‚ˆã‚Šè©³ç´°ã«ãªã‚‹
- å¾Œè¿°ã—ã¾ã™ãŒã€`Sphinx`ã¨ã„ã†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ä½œæˆãƒ„ãƒ¼ãƒ«ã§docstringã‚’åˆ©ç”¨ã§ãã‚‹
- ãªã«ã‚ˆã‚Šå°†æ¥ã®è‡ªåˆ†ã®ãŸã‚ã«ãªã‚‹

## ã‚¹ã‚¿ã‚¤ãƒ«ã®ç¨®é¡

docstringã®æ›¸ãæ–¹ã«ã¯ã„ãã¤ã‹ã®æµå„€ãŒã‚ã‚Šã¾ã™ã€‚
ä¸»ãªã‚‚ã®ã¯ä»¥ä¸‹ã®3ã¤ã§ã™ã€‚

- reStructuredText
- NumPy
- Google

ãã‚Œãã‚Œæ›¸ãæ–¹ã«ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚
è‡ªåˆ†ã®å¥½ããªæ›¸ãæ–¹ã‚’å‚ç…§ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚
ã¾ãŸã€ãƒãƒ¼ãƒ ã§docstringã®æ›¸ãæ–¹ãŒæ±ºã¾ã£ã¦ã„ã‚Œã°ãã®æ›¸ãæ–¹ã«ãªã‚‰ã„ã¾ã—ã‚‡ã†ã€‚

docstringã¯æ›¸ãæ–¹ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒå°‘ãªãã€ä½•ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å‚è€ƒã«ã™ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚

## å‚è€ƒURL

- [NumPyã‚¹ã‚¿ã‚¤ãƒ«Python Docstringsã®ä¾‹](https://www.sphinx-doc.org/ja/1.5/ext/example_numpy.html#example-numpy)
- [numpydoc docstring guide](https://numpydoc.readthedocs.io/en/latest/format.html)
- [Pythonã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆã®æ›¸ãæ–¹(NumPyã‚¹ã‚¿ã‚¤ãƒ«ç·¨)](https://www.memory-lovers.blog/entry/2019/01/10/003824)
- [\[Python\]å¯èª­æ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã®ã€docstringã®æ›¸ãæ–¹ã‚’å­¦ã¶ï¼ˆNumPyã‚¹ã‚¿ã‚¤ãƒ«ï¼‰](https://qiita.com/simonritchie/items/49e0813508cad4876b5a)
- [ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã®ãŸã‚ã«docstringã‚’æ›¸ã“ã†ï¼](https://www.slideshare.net/cocodrips/docstring-pyconjp2019)
- [numpy/numpy](https://github.com/numpy/numpy)
- [Pythonã§docstringã‚’æ›¸ã (Numpy-Style)](https://scrapbox.io/ganariya-public/Python%E3%81%A7docstring%E3%82%92%E6%9B%B8%E3%81%8F_(Numpy-Style))

# ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰

ã‚³ãƒ¼ãƒ‰ã‚’è¤‡æ•°äººã§æ›¸ãã¨ã€ãã‚Œãã‚Œç•°ãªã‚‹ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹ã®ç™–ãŒç¾ã‚Œã¾ã™ã€‚
`"` or `'`ã€æ–‡å­—æ•°ã€å¤‰æ•°ã®ä»˜ã‘æ–¹ãªã©ã•ã¾ã–ã¾ã§ã™ã€‚

ç•°ãªã‚‹ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€çš„ã«ã™ã‚‹ã¹ãã€ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ãƒ»Lintãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãªã©ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã‚Œã‚‰ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã‚ˆã‚Šçµ±ä¸€çš„ãªPythonã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®ç¯€ã§ã¯ã€ãã®ã†ã¡è‡ªåˆ†ãŒä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã«ã¤ã„ã¦ã®ã¿è§¦ã‚Œã¾ã™ã€‚
ãã®ãŸã‚ã€ã“ã‚Œã‚‰ä»¥å¤–ã«ã‚‚ä»–ã®LinterãŒã‚ã‚Šã¾ã™ã€‚ãœã²èª¿ã¹ã¦ã¿ã¦ãã ã•ã„ã€‚

## pep

pepã¯ã€`python enhancement proposal`ã®ç•¥ã§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’æŒ‡ã—ã¾ã™ã€‚
Pythonã‚’ã‚ˆã‚Šè‰¯ãã™ã‚‹ãŸã‚ã®ææ¡ˆæ›¸ã§ã‚ã‚Šã€æœ‰åãªã®ã¯pep8ã§ã™ã€‚

pep8ã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨ãªã£ã¦ãŠã‚Šã€å¤šãã®Pythonã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã®pep8ã‚’åŸºæº–ã«ã—ã¦ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/zhin92fp6grcf2i5cuf8u3648gaf)

## flake8

flake8ã¯pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’å®ˆã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚

flake8ã¯ä»¥ä¸‹3ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ©ãƒƒãƒ‘ãƒ¼ã«ãªã£ã¦ã„ã¾ã™ã€‚

- PyFlakes
- pycodestyle
- mccabe

flake8ã¯ã€ä¸€è¡Œã®æ–‡å­—æ•°ãªã©ã€ç´°ã‹ã„è¦ç´„ã®è¨­å®šã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€ä»¥ä¸‹ã®ã‚ˆã†ãªflake8ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’pipã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€`flake8`ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã€è‡ªå‹•ã§ãã‚Œã‚‰ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚

- flake8-docstrings
- flake8-mypy
- flake8-isort
- flake8-print

## black

`black`ã¯ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã§ã™ã€‚
flake8ã¯`è¦ç´„é•åã®ç®‡æ‰€ã‚’æ•™ãˆã‚‹`ã‚‚ã®ã§ã—ãŸãŒã€blackã¯å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚

blackã®ç‰¹å¾´ã¯æ¯”è¼ƒçš„æ–°ã—ãã§ããŸã‚‚ã®ã§ã‚ã‚Šã€ãã—ã¦å¤‰æ›´ã§ãã‚‹è¨­å®šãŒã‹ãªã‚Šå°‘ãªã„ã§ã™ã€‚
ãã®ãŸã‚ã€blackã‚’ä½¿ã£ã¦ãŠã‘ã°å¤šãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä¼¼ãŸã‚ˆã†ãªå¼·åˆ¶ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ãªã‚Šã¾ã™ã€‚

blackã¯éå¸¸ã«ä½¿ã„ã‚„ã™ã„ãŸã‚ã€ãœã²ä½¿ã„ãŸã„ã§ã™ã­ã€‚

## mypy

mypyã¯ã€ã‚³ãƒ¼ãƒ‰ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»å‹ã‚’é™çš„è§£æã—ã¦ã€é–“é•ã£ã¦ã„ã‚‹å‹ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚
mypyã®ãŠã‹ã’ã§ã€é–“é•ã£ã¦ã„ã‚‹ç®‡æ‰€ã®å‹ã‚’æ²»ã™ã ã‘ã§è‰¯ããªã‚Šã¾ã™ã€‚

ã—ã‹ã—ã€åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã«å¯¾ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™ã“ã¨ã‚‚ã‚ã‚‹ãŸã‚ã€ãã®ã¨ãã¯ã‚¹ã‚¿ãƒ–ã‚’ç”Ÿæˆã—ãŸã‚Šã€ã™ã§ã«pipã§é…å¸ƒã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¿ãƒ–ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## å‚è€ƒURL

- [pep 0](https://www.python.org/dev/peps/)
- [flake8](https://flake8.pycqa.org/en/latest/)
- [black](https://black.readthedocs.io/en/stable/)
- [mypy](http://www.mypy-lang.org/)
- [Configuring Flake8](https://flake8.pycqa.org/en/latest/user/configuration.html)
- [IntelliJã‚„PyCharmã§Pythonãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦flake8ã§æ–‡æ³•ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹](https://dev.1dz.jp/jetbrains/intellij/flake8_file_watchers/)
- [Pythonã«ã‚ˆã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™º](https://future-architect.github.io/articles/20200820/)
- [Pythonã§Lintã‚’ã™ã‚‹](https://scrapbox.io/ganariya-public/Python%E3%81%A7Lint%E3%82%92%E3%81%99%E3%82%8B)

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

Pythonã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹éš›ã¯ã„ãã¤ã‹ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºã¦ãã¾ã™ã€‚
ã“ã®ç¯€ã§ã¯ã“ã‚Œã‚‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## setup.py

setup.pyã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¬¬ä¸‰è€…ã«å‘ã‘ã¦ã€é…å¸ƒã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
`setuptools`ã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”¨ã„ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚

```python
# https://packaging.python.org/tutorials/packaging-projects/?highlight=setup.py#creating-setup-py
import setuptools

with open("README.md", "r", encoding="utf-8") as fh:
    long_description = fh.read()

setuptools.setup(
    name="example-pkg-YOUR-USERNAME-HERE", # Replace with your own username
    version="0.0.1",
    author="Example Author",
    author_email="author@example.com",
    description="A small example package",
    long_description=long_description,
    long_description_content_type="text/markdown",
    url="https://github.com/pypa/sampleproject",
    packages=setuptools.find_packages(),
    classifiers=[
        "Programming Language :: Python :: 3",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
    ],
    python_requires='>=3.6',
)
```

æ™®æ®µä½•æ°—ãªãæ›¸ã„ã¦ã„ã‚‹`pip install numpy`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã¯ã€setup.pyã§ä½œæˆã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼ˆPyPIï¼‰ã‹ã‚‰å–å¾—ã—ã€`site-packages`ã¨ã„ã†ãƒ‘ã‚¹ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å…¬é–‹ã—ãŸã„å ´åˆã¯`setup.py`ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚

## 


## å‚è€ƒURL

- [Python Packaging User GuideÂ¶](https://packaging.python.org/)
- [pythonã®setup.pyã«ã¤ã„ã¦ã¾ã¨ã‚ã‚‹](https://qiita.com/Tadahiro_Yamamura/items/2cbcd272a96bb3761cc8)
- [Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†æŠ€è¡“ã¾ã¨ã‚](https://www.yunabe.jp/docs/python_package_management.html)
- [ã€Techã®é“ã‚‚ä¸€æ­©ã‹ã‚‰ã€‘ç¬¬21å›ã€Œsetup.pyã‚’æ›¸ã„ã¦pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã«ã—ã‚ˆã†ã€](https://buildersbox.corp-sansan.com/entry/2019/07/11/110000)

# pypi


# ãƒ†ã‚¹ãƒˆ


# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

